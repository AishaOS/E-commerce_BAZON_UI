{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { UserStorageService } from 'src/app/auth/auth-services/storage-service/user-storage.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/auth/auth-services/auth-service/auth.service\";\nimport * as i5 from \"@angular/platform-browser\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/icon\";\nfunction ProfileComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.existingProfileImage, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ProfileComponent_mat_icon_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 15);\n    i0.ɵɵtext(1, \"account_circle\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"This Input is Required!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_mat_error_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"This Input is Required!\");\n    i0.ɵɵelementEnd();\n  }\n}\nclass ProfileComponent {\n  constructor(fb, snackBar, router, authService, sanitizer) {\n    this.fb = fb;\n    this.snackBar = snackBar;\n    this.router = router;\n    this.authService = authService;\n    this.sanitizer = sanitizer;\n    this.isSpinning = false;\n    this.listOfOption = [];\n    this.listOfTagOptions = [];\n    this.avatarImage = 'src\\assets\\avatar.png';\n  }\n  ngOnInit() {\n    this.validateForm = this.fb.group({\n      email: ['', Validators.required],\n      name: ['', Validators.required]\n    });\n    this.getUserData();\n  }\n  getUserData() {\n    this.authService.getUserById().subscribe(res => {\n      console.log(res);\n      this.validateForm.patchValue(res);\n      if (res.returnedImg != null) {\n        this.existingProfileImage = 'data:image/png;base64,' + res.returnedImg;\n      }\n    });\n  }\n  onFileSelected(event) {\n    this.newUpdatedSelectedFile = event.target.files[0];\n    const file = event.target.files[0];\n    this.imgChanged = true;\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.existingProfileImage = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n  submitForm() {\n    if (this.validateForm.valid) {\n      const formData = new FormData();\n      if (this.imgChanged && this.newUpdatedSelectedFile) {\n        formData.append('img', this.newUpdatedSelectedFile);\n      }\n      formData.append('name', this.validateForm.get('name').value);\n      formData.append('email', this.validateForm.get('email').value);\n      formData.append('id', UserStorageService.getUserId());\n      console.log(formData);\n      this.authService.updateUser(formData).subscribe(res => {\n        if (res.id != null) {\n          this.snackBar.open(`Profile updated Successfully!`, 'Close', {\n            duration: 5000,\n            panelClass: 'success-snackbar'\n          });\n          this.getUserData();\n        } else {\n          this.snackBar.open(`${res.message}`, 'ERROR', {\n            duration: 5000,\n            panelClass: 'error-snackbar'\n          });\n        }\n      });\n    }\n  }\n}\nProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n  return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i5.DomSanitizer));\n};\nProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfileComponent,\n  selectors: [[\"app-profile\"]],\n  decls: 25,\n  vars: 6,\n  consts: [[1, \"form-container\", 3, \"formGroup\"], [1, \"profile-card\"], [1, \"profile-picture\"], [1, \"avatar-wrapper\"], [\"class\", \"avatar\", \"alt\", \"profile\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"avatar-icon\", 4, \"ngIf\"], [\"for\", \"upload-profile-image\", 1, \"edit-icon\"], [\"type\", \"file\", \"id\", \"upload-profile-image\", \"accept\", \"image/x-png,image/gif,image/jpeg\", \"hidden\", \"\", 3, \"change\"], [\"appearance\", \"outline\", 1, \"form-field\"], [\"matInput\", \"\", \"type\", \"email\", \"placeholder\", \"Email\", \"formControlName\", \"email\"], [4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Name\", \"formControlName\", \"name\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", \"color\", \"accent\", \"routerLink\", \"/customer/change_password\"], [\"alt\", \"profile\", 1, \"avatar\", 3, \"src\"], [1, \"avatar-icon\"]],\n  template: function ProfileComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"mat-card\", 1)(2, \"div\", 2)(3, \"div\", 3);\n      i0.ɵɵtemplate(4, ProfileComponent_img_4_Template, 1, 1, \"img\", 4);\n      i0.ɵɵtemplate(5, ProfileComponent_mat_icon_5_Template, 2, 0, \"mat-icon\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"label\", 6)(7, \"mat-icon\");\n      i0.ɵɵtext(8, \"edit\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(9, \"input\", 7);\n      i0.ɵɵlistener(\"change\", function ProfileComponent_Template_input_change_9_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"mat-form-field\", 8)(11, \"mat-label\");\n      i0.ɵɵtext(12, \"E-mail\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 9);\n      i0.ɵɵtemplate(14, ProfileComponent_mat_error_14_Template, 2, 0, \"mat-error\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"mat-form-field\", 8)(16, \"mat-label\");\n      i0.ɵɵtext(17, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 11);\n      i0.ɵɵtemplate(19, ProfileComponent_mat_error_19_Template, 2, 0, \"mat-error\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_20_listener() {\n        return ctx.submitForm();\n      });\n      i0.ɵɵtext(21, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"mat-card-actions\")(23, \"button\", 13);\n      i0.ɵɵtext(24, \"Want to change the password?\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      let tmp_3_0;\n      let tmp_4_0;\n      i0.ɵɵproperty(\"formGroup\", ctx.validateForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.existingProfileImage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.existingProfileImage);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx.validateForm.get(\"email\")) == null ? null : tmp_3_0.hasError(\"required\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (tmp_4_0 = ctx.validateForm.get(\"name\")) == null ? null : tmp_4_0.hasError(\"required\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.validateForm.valid);\n    }\n  },\n  dependencies: [i6.NgIf, i3.RouterLink, i7.MatButton, i8.MatCard, i8.MatCardActions, i9.MatFormField, i9.MatLabel, i9.MatError, i10.MatInput, i11.MatIcon, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\".form-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  padding-top: 15px;\\n}\\n.form-container[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%] {\\n  width: 30%;\\n  margin-bottom: 10px;\\n}\\n@media screen and (max-width: 768px) {\\n  .form-container[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n}\\n\\n.profile-card[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 20px;\\n  margin-bottom: 30px;\\n}\\n.profile-card[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 200px;\\n  height: 200px;\\n  border-radius: 50%;\\n  background-color: #ccc;\\n  overflow: hidden;\\n  z-index: 3;\\n}\\n.profile-card[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.profile-card[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n}\\n.profile-card[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%] {\\n  font-size: 120px;\\n  color: #fff;\\n  position: relative;\\n  z-index: 1;\\n}\\n.profile-card[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%] {\\n  position: absolute;\\n  bottom: 10px;\\n  right: 10px;\\n  width: 30px;\\n  height: 30px;\\n  background-color: rgba(0, 0, 0, 0.6);\\n  color: #fff;\\n  border-radius: 50%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  z-index: 2;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9jdXN0b21lci9jb21wb25lbnRzL3Byb2ZpbGUvcHJvZmlsZS5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL0UtY29tbWVyY2UlMjBmaW5hbCUyMHByb2plY3QvRS1jb21tZXJjZV9CQVpPTl9VSS9zcmMvYXBwL21vZHVsZXMvY3VzdG9tZXIvY29tcG9uZW50cy9wcm9maWxlL3Byb2ZpbGUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7QUNDSjtBRENJO0VBQ0ksVUFBQTtFQUNBLG1CQUFBO0FDQ1I7QURFSTtFQVpKO0lBYVEsV0FBQTtFQ0NOO0FBQ0Y7O0FERUE7RUFDSSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtBQ0NKO0FEQ0k7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EsVUFBQTtBQ0NSO0FEQ1E7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUNDWjtBRENZO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQ0NoQjtBREVZO0VBQ0ksZ0JBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxVQUFBO0FDQWhCO0FESVE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxvQ0FBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLFVBQUE7QUNGWiIsInNvdXJjZXNDb250ZW50IjpbIi5mb3JtLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZy10b3A6IDE1cHg7XG5cbiAgICAuZm9ybS1maWVsZCB7XG4gICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgfVxuXG4gICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxufVxuXG4ucHJvZmlsZS1jYXJkIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuXG4gICAgLnByb2ZpbGUtcGljdHVyZSB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHotaW5kZXg6IDM7XG5cbiAgICAgICAgLmF2YXRhci13cmFwcGVyIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICAgICAgICAgLmF2YXRhciB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuYXZhdGFyLWljb24ge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTIwcHg7XG4gICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAuZWRpdC1pY29uIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogMTBweDtcbiAgICAgICAgICAgIHJpZ2h0OiAxMHB4O1xuICAgICAgICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7XG4gICAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICB6LWluZGV4OiAyO1xuICAgICAgICB9XG4gICAgfVxufSIsIi5mb3JtLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nLXRvcDogMTVweDtcbn1cbi5mb3JtLWNvbnRhaW5lciAuZm9ybS1maWVsZCB7XG4gIHdpZHRoOiAzMCU7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweCkge1xuICAuZm9ybS1jb250YWluZXIge1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG59XG5cbi5wcm9maWxlLWNhcmQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMjBweDtcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcbn1cbi5wcm9maWxlLWNhcmQgLnByb2ZpbGUtcGljdHVyZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDIwMHB4O1xuICBoZWlnaHQ6IDIwMHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHotaW5kZXg6IDM7XG59XG4ucHJvZmlsZS1jYXJkIC5wcm9maWxlLXBpY3R1cmUgLmF2YXRhci13cmFwcGVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5wcm9maWxlLWNhcmQgLnByb2ZpbGUtcGljdHVyZSAuYXZhdGFyLXdyYXBwZXIgLmF2YXRhciB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuLnByb2ZpbGUtY2FyZCAucHJvZmlsZS1waWN0dXJlIC5hdmF0YXItd3JhcHBlciAuYXZhdGFyLWljb24ge1xuICBmb250LXNpemU6IDEyMHB4O1xuICBjb2xvcjogI2ZmZjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiAxO1xufVxuLnByb2ZpbGUtY2FyZCAucHJvZmlsZS1waWN0dXJlIC5lZGl0LWljb24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMTBweDtcbiAgcmlnaHQ6IDEwcHg7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcbiAgY29sb3I6ICNmZmY7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgei1pbmRleDogMjtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport { ProfileComponent };","map":{"version":3,"names":["Validators","UserStorageService","i0","ɵɵelement","ɵɵproperty","ctx_r0","existingProfileImage","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ProfileComponent","constructor","fb","snackBar","router","authService","sanitizer","isSpinning","listOfOption","listOfTagOptions","avatarImage","ngOnInit","validateForm","group","email","required","name","getUserData","getUserById","subscribe","res","console","log","patchValue","returnedImg","onFileSelected","event","newUpdatedSelectedFile","target","files","file","imgChanged","reader","FileReader","onload","e","result","readAsDataURL","submitForm","valid","formData","FormData","append","get","value","getUserId","updateUser","id","open","duration","panelClass","message","ɵɵdirectiveInject","i1","FormBuilder","i2","MatSnackBar","i3","Router","i4","AuthService","i5","DomSanitizer","selectors","decls","vars","consts","template","ProfileComponent_Template","rf","ctx","ɵɵtemplate","ProfileComponent_img_4_Template","ProfileComponent_mat_icon_5_Template","ɵɵlistener","ProfileComponent_Template_input_change_9_listener","$event","ProfileComponent_mat_error_14_Template","ProfileComponent_mat_error_19_Template","ProfileComponent_Template_button_click_20_listener","ɵɵadvance","tmp_3_0","hasError","tmp_4_0"],"sources":["/Users/aishaoyinkansola/Desktop/Projects/E-commerce final project/E-commerce_BAZON_UI/src/app/modules/customer/components/profile/profile.component.ts","/Users/aishaoyinkansola/Desktop/Projects/E-commerce final project/E-commerce_BAZON_UI/src/app/modules/customer/components/profile/profile.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/auth/auth-services/auth-service/auth.service';\nimport { UserStorageService } from 'src/app/auth/auth-services/storage-service/user-storage.service';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.scss']\n})\nexport class ProfileComponent {\n\n  newUpdatedSelectedFile: string;\n  myFile: FileList;\n  isSpinning = false;\n  listOfOption: Array<{ label: string; value: string }> = [];\n  listOfTagOptions = [];\n  existingProfileImage: any;\n  validateForm!: FormGroup;\n  imgChanged: boolean;\n  avatarImage: any = 'src\\assets\\avatar.png';\n\n  constructor(private fb: FormBuilder,\n    private snackBar: MatSnackBar,\n    private router: Router,\n    private authService: AuthService,\n    private sanitizer: DomSanitizer) { }\n\n  ngOnInit(): void {\n    this.validateForm = this.fb.group({\n      email: ['', Validators.required],\n      name: ['', Validators.required]\n    });\n    this.getUserData();\n  }\n\n  getUserData() {\n    this.authService.getUserById().subscribe(res => {\n      console.log(res);\n      this.validateForm.patchValue(res);\n      if (res.returnedImg != null) {\n        this.existingProfileImage = 'data:image/png;base64,' + res.returnedImg;\n      }\n    })\n  }\n\n  onFileSelected(event: any) {\n    this.newUpdatedSelectedFile = event.target.files[0];\n    const file = event.target.files[0];\n    this.imgChanged = true;\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e: any) => {\n        this.existingProfileImage = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  submitForm(): void {\n    if (this.validateForm.valid) {\n      const formData: FormData = new FormData();\n      if (this.imgChanged && this.newUpdatedSelectedFile) {\n        formData.append('img', this.newUpdatedSelectedFile);\n      }\n      formData.append('name', this.validateForm.get('name').value);\n      formData.append('email', this.validateForm.get('email').value);\n      formData.append('id', UserStorageService.getUserId());\n      console.log(formData);\n      this.authService.updateUser(formData).subscribe((res) => {\n        if (res.id != null) {\n          this.snackBar.open(`Profile updated Successfully!`, 'Close', {\n            duration: 5000,\n            panelClass: 'success-snackbar',\n          });\n          this.getUserData();\n        } else {\n          this.snackBar.open(`${res.message}`, 'ERROR', {\n            duration: 5000,\n            panelClass: 'error-snackbar',\n          });\n        }\n      });\n    }\n  }\n\n\n}\n","<form [formGroup]=\"validateForm\" class=\"form-container\">\n  <mat-card class=\"profile-card\">\n\n    <div class=\"profile-picture\">\n      <div class=\"avatar-wrapper\">\n        <img class=\"avatar\" *ngIf=\"existingProfileImage\" [src]=\"existingProfileImage\" alt=\"profile\" />\n        <mat-icon class=\"avatar-icon\" *ngIf=\"!existingProfileImage\">account_circle</mat-icon>\n      </div>\n      <label for=\"upload-profile-image\" class=\"edit-icon\">\n        <mat-icon>edit</mat-icon>\n      </label>\n    </div>\n\n    <input type=\"file\" id=\"upload-profile-image\" accept=\"image/x-png,image/gif,image/jpeg\"\n      (change)=\"onFileSelected($event)\" hidden>\n  </mat-card>\n\n  <mat-form-field appearance=\"outline\" class=\"form-field\">\n    <mat-label>E-mail</mat-label>\n    <input matInput type=\"email\" placeholder=\"Email\" formControlName=\"email\">\n    <mat-error *ngIf=\"validateForm.get('email')?.hasError('required')\">This Input is Required!</mat-error>\n  </mat-form-field>\n\n  <mat-form-field appearance=\"outline\" class=\"form-field\">\n    <mat-label>Name</mat-label>\n    <input matInput type=\"text\" placeholder=\"Name\" formControlName=\"name\">\n    <mat-error *ngIf=\"validateForm.get('name')?.hasError('required')\">This Input is Required!</mat-error>\n  </mat-form-field>\n\n  <button mat-raised-button color=\"primary\" [disabled]=\"!validateForm.valid\" (click)=\"submitForm()\">Save</button>\n\n  <mat-card-actions>\n    <button mat-button color=\"accent\" routerLink=\"/customer/change_password\">Want to change the password?</button>\n  </mat-card-actions>\n</form>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}